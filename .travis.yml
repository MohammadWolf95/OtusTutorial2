language: cpp
compiler: clang
dist: trusty
sudo: required

before_script:
- sudo apt-get update -qq
#- sudo apt-get install libboost-test-dev -y
script:
  # Install Boost Test Framework 1.54
- sudo apt-get install -y -qq libboost-test1.54-dev
- wget -O - https://apt.llvm.org/llvm-snapshot.gpg.key | sudo apt-key add -
- sudo apt-add-repository "deb http://apt.llvm.org/xenial/ llvm-toolchain-xenial-5.0 main"
- sudo apt-get install -y clang-5.0
- cmake .
- cmake --build .
- cmake --build . --target test
- cmake --build . --target package
deploy:
  provider: script
  skip_cleanup: true
  script:
  - curl -T IpFilter-0.0.$TRAVIS_BUILD_NUMBER-Linux.deb -umohammadwolf95:$BINTRAY_API_KEY "https://api.bintray.com/content/mohammadwolf95/ip_filter/ip_filters_package/$TRAVIS_BUILD_NUMBER/IpFilter-0.0.$TRAVIS_BUILD_NUMBER-Liux.deb;deb_distribution=trusty;deb_component=main;deb_architecture=amd64;publish=1"